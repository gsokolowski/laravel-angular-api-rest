{"version":3,"sources":["angular-permission.js"],"names":["permission","angular","module","config","$stateProvider","decorator","state","parentFn","self","getState","run","$rootScope","$state","$q","Authorization","PermissionMap","$on","event","toState","toParams","fromState","fromParams","options","areSetStatePermissions","isDefined","data","permissions","setStateAuthorizationStatus","status","extend","$$isAuthorizationFinished","areStateEventsDefaultPrevented","isStateChangePermissionStartDefaultPrevented","isStateChangeStartDefaultPrevented","compensatePermissionMap","statePermissionMap","permissionMap","redirectTo","toStatePath","get","name","path","slice","reverse","forEach","extendPermissionMap","authorizeForState","authorize","then","$broadcast","goToState","rejectedPermission","redirectToState","go","notify","defaultPrevented","preventDefault","compensatedPermissionMap","factory","this","only","resolvePermissionMapProperty","except","handleFunctionRedirect","redirectFunction","when","call","redirectState","isString","TypeError","handleStringRedirect","handleObjectRedirect","redirectObject","ReferenceError","isFunction","property","isArray","prototype","concat","rejectedPermissionName","isObject","Permission","permissionName","validationFunction","validateConstructor","wrapInPromise","result","dfd","defer","resolve","reject","promise","validatePermission","validationResult","PermissionStore","Role","roleName","permissionNames","defineManyPermissions","length","validateRole","promises","map","hasPermissionDefinition","getPermissionDefinition","all","service","definePermission","permissionStore","removePermissionDefinition","getStore","clearStore","defineRole","roleStore","removeRoleDefinition","hasRoleDefinition","getRoleDefinition","directive","$log","restrict","bindToController","controllerAs","controller","$scope","$element","$watchGroup","removeClass","addClass","e","error","message","RoleStore","permissionsMap","handleAuthorization","deferred","exceptPromises","findMatchingPermissions","rejectedPermissions","onlyPromises","resolvedPermissions","counter","results","key","value","hasOwnProperty","reason","handleRoleValidation","handlePermissionValidation","role"],"mappings":"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","file":"angular-permission.min.js"}